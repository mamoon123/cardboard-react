{"ast":null,"code":"import _defineProperty from\"/Users/irfan/personal/cardboard-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/irfan/personal/cardboard-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/irfan/personal/cardboard-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable jsx-a11y/anchor-is-valid */import React,{useState,useEffect}from'react';import{useCookies}from'react-cookie';import{get}from'lodash/fp';import{AuthForm,SubmitButton}from'./AuthStyle';import{VALID_EMAIL_REGEX,VALID_NAME_REGEX,ACCESS_TOKEN,USER}from'../Constant';import{MINIMUM_NAME_LENGTH,MAXIMUM_NAME_LENGTH,MAXIMUM_EMAIL_LENGTH}from'../ValidationLength';var Signup=function Signup(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formErrors=_useState2[0],setFormErrors=_useState2[1];var _useCookies=useCookies([ACCESS_TOKEN]),_useCookies2=_slicedToArray(_useCookies,2),cookies=_useCookies2[0],setCookie=_useCookies2[1];var token=cookies[ACCESS_TOKEN];var _useState3=useState({name:'',email:'',password:''}),_useState4=_slicedToArray(_useState3,2),register=_useState4[0],setRegister=_useState4[1];var name=register.name,email=register.email,password=register.password;useEffect(function(){var errors={name:'',email:''};if(!name){errors.name='';}else if(!(name.length>=MINIMUM_NAME_LENGTH)){errors.name=\"Name should be at least \".concat(MINIMUM_NAME_LENGTH,\" characters long\");}else if(!(name.length<=MAXIMUM_NAME_LENGTH)){errors.name=\"Name should not exceed \".concat(MAXIMUM_NAME_LENGTH,\" characters\");}else if(!VALID_NAME_REGEX.test(name)){errors.name='Name should only contain alphabets and numbers';}if(!email){errors.email='';}else if(!VALID_EMAIL_REGEX.test(email)){errors.email='*Please enter valid email';}else if(!(email.length<=MAXIMUM_EMAIL_LENGTH)){errors.email=\"Email should not exceed \".concat(MAXIMUM_EMAIL_LENGTH,\" characters\");}console.log(register);console.log(errors);setFormErrors(errors);},[name,email,register]);var onInputChange=function onInputChange(evt){setRegister(_objectSpread(_objectSpread({},register),{},_defineProperty({},evt.target.name,evt.target.value)));};var confirm=function confirm(response){var access_token=response.access_token,user=response.user;if(access_token){setCookie(USER,user);setCookie(ACCESS_TOKEN,access_token);console.log(access_token);}else{console.log(response.message);}};var onFormSubmit=function onFormSubmit(evt){evt.preventDefault();console.log(register);fetch(\"http://localhost:3000/api/v1/auth/register\",{\"method\":\"POST\",\"headers\":{\"content-type\":\"application/json\",\"accept\":\"application/json\"},\"body\":JSON.stringify({name:name,email:email,password:password})}).then(function(response){return response.json();}).then(function(response){confirm(response);}).catch(function(err){debugger;console.log(err);});};if(token){window.location.href='/orders';}return/*#__PURE__*/React.createElement(AuthForm,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:onFormSubmit,method:\"post\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"input-label\",for:\"email\"},\"Name:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"name\",className:\"form-control\",id:\"name\",required:true,value:name,onChange:onInputChange,error:get('name',formErrors)})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"input-label\",for:\"email\"},\"Email address:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"email\",name:\"email\",className:\"form-control\",id:\"email\",required:true,value:email,onChange:onInputChange,error:get('email',formErrors)})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{className:\"input-label\",for:\"pwd\"},\"Password:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",className:\"form-control\",id:\"pwd\",required:true,value:password,onChange:onInputChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"checkbox\"},/*#__PURE__*/React.createElement(\"label\",{className:\"input-label\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\"}),\" Remember me\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(SubmitButton,{className:\"form-group\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-default\"},\"Submit\"))));};export default Signup;","map":{"version":3,"sources":["/Users/irfan/personal/cardboard-react/src/Components/Auth/Signup.js"],"names":["React","useState","useEffect","useCookies","get","AuthForm","SubmitButton","VALID_EMAIL_REGEX","VALID_NAME_REGEX","ACCESS_TOKEN","USER","MINIMUM_NAME_LENGTH","MAXIMUM_NAME_LENGTH","MAXIMUM_EMAIL_LENGTH","Signup","formErrors","setFormErrors","cookies","setCookie","token","name","email","password","register","setRegister","errors","length","test","console","log","onInputChange","evt","target","value","confirm","response","access_token","user","message","onFormSubmit","preventDefault","fetch","JSON","stringify","then","json","catch","err","window","location","href"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React, { useState, useEffect } from 'react';\nimport { useCookies } from 'react-cookie';\nimport { get } from 'lodash/fp';\nimport { AuthForm, SubmitButton } from './AuthStyle'\nimport { VALID_EMAIL_REGEX, VALID_NAME_REGEX, ACCESS_TOKEN, USER } from '../Constant';\nimport { MINIMUM_NAME_LENGTH, MAXIMUM_NAME_LENGTH, MAXIMUM_EMAIL_LENGTH } from '../ValidationLength';\n\n\nconst Signup = () => {\n  const [formErrors, setFormErrors] = useState({});\n  const [cookies, setCookie] = useCookies([ACCESS_TOKEN]);\n  const token = cookies[ACCESS_TOKEN];\n  const [register, setRegister] = useState({\n    name: '',\n    email: '',\n    password: '',\n  });\n  const {\n    name,\n    email,\n    password,\n  } = register;\n\n  useEffect(() => {\n    const errors = {\n      name: '',\n      email: '',\n    };\n    if (!name) {\n      errors.name = '';\n    } else if (!(name.length >= MINIMUM_NAME_LENGTH)) {\n      errors.name = `Name should be at least ${MINIMUM_NAME_LENGTH} characters long`;\n    } else if (!(name.length <= MAXIMUM_NAME_LENGTH)) {\n      errors.name = `Name should not exceed ${MAXIMUM_NAME_LENGTH} characters`;\n    } else if (!VALID_NAME_REGEX.test(name)) {\n      errors.name = 'Name should only contain alphabets and numbers';\n    }\n\n    if (!email) {\n      errors.email = '';\n    } else if (!VALID_EMAIL_REGEX.test(email)) {\n      errors.email = '*Please enter valid email';\n    } else if (!(email.length <= MAXIMUM_EMAIL_LENGTH)) {\n      errors.email = `Email should not exceed ${MAXIMUM_EMAIL_LENGTH} characters`;\n    }\n    console.log(register)\n    console.log(errors)\n    setFormErrors(errors);\n  }, [name, email, register]);\n\n  const onInputChange = (evt) => {\n    setRegister({\n      ...register,\n      [evt.target.name]: evt.target.value,\n    });\n  };\n\n  const confirm = (response) => {\n    const { access_token, user } = response;\n    if (access_token) {\n      setCookie(USER, user);\n      setCookie(ACCESS_TOKEN, access_token);\n      console.log(access_token)\n    } else {\n      console.log(response.message)\n    }\n  }\n\n  const onFormSubmit = (evt) => {\n    evt.preventDefault();\n    console.log(register)\n    fetch(\"http://localhost:3000/api/v1/auth/register\", {\n      \"method\": \"POST\",\n      \"headers\": {\n        \"content-type\": \"application/json\",\n        \"accept\": \"application/json\"\n      },\n      \"body\": JSON.stringify({\n        name: name,\n        email: email,\n        password: password,\n      })\n    })\n    .then(response => response.json())\n    .then(response => {\n      confirm(response);\n    })\n    .catch(err => {\n      debugger\n      console.log(err);\n    });\n  };\n\n  if (token) {\n    window.location.href = '/orders';\n  }\n\n  return (\n    <AuthForm>\n      <form\n        onSubmit={onFormSubmit}\n        method=\"post\"\n      >\n        <div className=\"form-group\">\n          <label className=\"input-label\" for=\"email\">Name:</label>\n          <input \n            type=\"text\"\n            name=\"name\"\n            className=\"form-control\" \n            id=\"name\"\n            required\n            value={name}\n            onChange={onInputChange}\n            error={get('name', formErrors)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label className=\"input-label\" for=\"email\">Email address:</label>\n          <input \n            type=\"email\" \n            name=\"email\"\n            className=\"form-control\" \n            id=\"email\" \n            required\n            value={email}\n            onChange={onInputChange}\n            error={get('email', formErrors)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label className=\"input-label\" for=\"pwd\">Password:</label>\n          <input \n            type=\"password\"\n            name=\"password\"\n            className=\"form-control\" \n            id=\"pwd\"\n            required\n            value={password}\n            onChange={onInputChange}\n          />\n        </div>\n        <div className=\"checkbox\">\n          <label className=\"input-label\"><input type=\"checkbox\" /> Remember me</label>\n        </div>\n        <br></br>\n        <SubmitButton className=\"form-group\">\n          <button type=\"submit\" className=\"btn btn-default\">Submit</button>\n        </SubmitButton>\n      </form>\n    </AuthForm>\n  );\n};\n\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}