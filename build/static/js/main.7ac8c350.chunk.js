(this["webpackJsonpcardboard-react"]=this["webpackJsonpcardboard-react"]||[]).push([[0],{32:function(e,a,n){e.exports=n(50)},38:function(e,a,n){},39:function(e,a,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},40:function(e,a,n){},50:function(e,a,n){"use strict";n.r(a);var t=n(0),c=n.n(t),r=n(27),o=n.n(r),l=(n(37),n(38),n(39),n(40),n(1)),i=n(51),s=n(20),m=n(31),u=n(2),d=n(21),p=n.n(d),f=new RegExp(/[\w-]+@([\w-]+\.)+[\w-]+/),b=(new RegExp("(?=.{8})((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])|(?=.*d)(?=.*[a-zA-Z])(?=.*[\\W_])|(?=.*[a-z])(?=.*[A-Z])(?=.*[\\W_])).*"),new RegExp("^(?=.*[a-z])"),new RegExp("(?=.*[A-Z])"),new RegExp("(?=.*[0-9])"),new RegExp("(?=.[!@#$%^&])"),new RegExp("^[a-zA-Z0-9_ .-]*$")),h=(new RegExp("(?=.{8})"),new RegExp("(?=.*[0-9])"),new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i"),n(4)),v=n(5);function E(){var e=Object(h.a)(["\n  padding: 10px 75px !important;\n  button {\n    width: 150px;\n    background: #6d6d71;\n    color: white;\n    border: 1px solid #6d6d71;\n    border-radius: 4px;\n    &:hover {\n      color: white !important;\n    }\n  }\n"]);return E=function(){return e},e}function g(){var e=Object(h.a)(["\n  padding: 10px 20px !important;\n  span {\n    width: 150px;\n  }\n  .span-label {\n    width: 150px;\n    text-align: right;\n  }\n"]);return g=function(){return e},e}function x(){var e=Object(h.a)(["\n  input {\n    width: 100px;\n    height: 30px;\n    border: 1px solid #cacaca;\n    border-radius: 4px;\n    padding: 0px 4px 0px 8px;\n    margin-top: -5px;\n    &:focus {\n      border: 1px solid #cacaca !important;\n      box-shadow: none;\n      outline: 0px; \n    }\n  }\n"]);return x=function(){return e},e}function w(){var e=Object(h.a)(["\n  select {\n    width: 300px;\n    height: 40px;\n    margin: 0px 20px;\n    padding: 0px 4px;\n    border: 1px solid #cacaca;\n    border-radius: 4px;\n    &:focus {\n      border: 1px solid #cacaca !important;\n      box-shadow: none;\n      outline: 0px; \n    }\n  }\n"]);return w=function(){return e},e}function j(){var e=Object(h.a)(["\n  background: #f3f3f3;\n"]);return j=function(){return e},e}function N(){var e=Object(h.a)(["\n  width: 97%;\n  margin: 10px auto;\n  background: #f3f3f3;\n  padding: 25px 10px;\n  .order_column {\n    width: 14.3% !important;\n    text-align: left;\n    height: 24px;\n  }\n  .head {\n    font-weight: bold;\n  }\n"]);return N=function(){return e},e}function O(){var e=Object(h.a)(["\n  width: 97%;\n  margin: 10px auto;\n  background: #f3f3f3;\n  padding: 10px;\n  .order_column {\n    width: 14.3% !important;\n    text-align: left;\n    height: 24px;\n  }\n  .head {\n    font-weight: bold;\n  }\n"]);return O=function(){return e},e}var _=v.a.div(O()),y=v.a.div(N()),k=(v.a.div(j()),v.a.div(w()),v.a.div(x())),S=v.a.div(g()),A=v.a.div(E()),D=function(){var e=Object(i.a)(["access_token"]),a=Object(l.a)(e,1)[0].access_token,n=Object(t.useState)([]),r=Object(l.a)(n,2),o=r[0],s=r[1];return Object(t.useEffect)((function(){fetch("http://localhost:3000/api/v1/orders",{method:"GET",headers:{"content-type":"application/json",accept:"application/json",Authorization:"token "+a}}).then((function(e){return e.json()})).then((function(e){!function(e){var a=e.orders;console.log(a),s(a)}(e)})).catch((function(e){console.log(e)}))}),[a]),a||(window.location.href="/login"),c.a.createElement("div",null,c.a.createElement(_,{className:"d-flex flex-row"},c.a.createElement("div",{className:"order_column head"},"Order ID"),c.a.createElement("div",{className:"order_column head"},"Card Type"),c.a.createElement("div",{className:"order_column head"},"Quantity"),c.a.createElement("div",{className:"order_column head"},"Price"),c.a.createElement("div",{className:"order_column head"},"Shipping Fee"),c.a.createElement("div",{className:"order_column head"},"Discount"),c.a.createElement("div",{className:"order_column head"},"Total Price"),c.a.createElement("div",{className:"order_column head"},"Created At")),o.map((function(e,a){return c.a.createElement(_,{className:"d-flex flex-row",key:a},c.a.createElement("div",{className:"order_column"},e.id),c.a.createElement("div",{className:"order_column"},e.card_type),c.a.createElement("div",{className:"order_column"},e.quantity),c.a.createElement("div",{className:"order_column"},e.price),c.a.createElement("div",{className:"order_column"},e.shipping_fee),c.a.createElement("div",{className:"order_column"},e.discount),c.a.createElement("div",{className:"order_column"},e.total_price),c.a.createElement("div",{className:"order_column"},function(e){var a=p.a.utc(e);return p()(a).local().format("YYYY-MM-DD HH:mm")}(e.created_at)))})))},z=function(){var e=Object(i.a)(["access_token"]),a=Object(l.a)(e,1)[0],n=a.access_token,r=a.user,o=Object(t.useState)([]),s=Object(l.a)(o,2),m=s[0],u=s[1],d=Object(t.useState)(0),p=Object(l.a)(d,2),f=p[0],b=p[1],h=Object(t.useState)(0),v=Object(l.a)(h,2),E=v[0],g=v[1],x=Object(t.useState)(0),w=Object(l.a)(x,2),j=w[0],N=w[1],O=Object(t.useState)(0),_=Object(l.a)(O,2),D=_[0],z=_[1];Object(t.useEffect)((function(){z(30*f)}),[f]),Object(t.useEffect)((function(){N(20*E)}),[E]);Object(t.useEffect)((function(){fetch("http://localhost:3000/api/v1/cardboard_types",{method:"GET",headers:{"content-type":"application/json",accept:"application/json",Authorization:"token "+n}}).then((function(e){return e.json()})).then((function(e){!function(e){var a=e.cardboard_type;console.log(a),u(a)}(e)})).catch((function(e){console.log(e)}))}),[n]);var C=function(e){g(parseInt(e.target.value,10))},P=function(e){b(parseInt(e.target.value,10))},R=function(){return E+f},T=function(){return j+D},q=function(){var e="";return E>0&&(e+="High Quality"),f>0&&(e+=", Premium"),e},U=function(){var e=0;return R()<=10&&R()>0&&(e=T()+30),R()<=20&&R()>10&&(e=T()),R()>20&&(e=.9*T()),e},J=function(){var e=0;return T()-U()>0&&(e=T()-U()),e};return n||(window.location.href="/login"),c.a.createElement("div",null,c.a.createElement(y,{className:"d-flex flex-row"},c.a.createElement("div",{className:"order_column head"},"CardBoard #"),c.a.createElement("div",{className:"order_column head"},"Card Type"),c.a.createElement("div",{className:"order_column head"},"Price"),c.a.createElement("div",{className:"order_column head"},"Qty"),c.a.createElement("div",{className:"order_column head"},"Total")),m.map((function(e,a){return c.a.createElement(y,{className:"d-flex flex-row",key:a},c.a.createElement("div",{className:"order_column"},a+1),c.a.createElement("div",{className:"order_column"},e.card_type),c.a.createElement("div",{className:"order_column"},e.price," AUD"),c.a.createElement("div",{className:"order_column"},c.a.createElement(k,{className:"order_column head"},c.a.createElement("input",{min:"0",type:"number",value:0===a?E:f,name:"quantity",onChange:0===a?C:P}))),c.a.createElement("div",{className:"order_column"},0===a?j:D," AUD"))})),c.a.createElement(S,null,c.a.createElement("div",{className:"d-flex flex-row justify-content-end"},c.a.createElement("span",{className:"span-label"},"Sub Total: "),c.a.createElement("span",null," ",T()," AUD ")),c.a.createElement("div",{className:"d-flex flex-row justify-content-end"},c.a.createElement("span",{className:"span-label"},"Shipping Fee: "),R()<10&&R()>0?c.a.createElement("span",null," 30 AUD "):c.a.createElement("span",null," 0 AUD ")),c.a.createElement("div",{className:"d-flex flex-row justify-content-end"},c.a.createElement("span",{className:"span-label"},"Discount: "),R()>20?c.a.createElement("span",null," 0.9 AUD "):c.a.createElement("span",null," 0 AUD ")),c.a.createElement("div",{className:"d-flex flex-row justify-content-end"},c.a.createElement("span",{className:"span-label"},"Total Amount: "),c.a.createElement("span",null," ",U()," AUD "))),c.a.createElement(A,{className:"d-flex flex-row justify-content-end"},c.a.createElement("button",{type:"button",onClick:function(){var e={quantity:R(),price:T(),user_id:r.id,shipping_fee:R()<10?30:0,discount:J(),card_type:q(),total_price:U()};console.log(e),fetch("http://localhost:3000/api/v1/orders",{method:"POST",headers:{"content-type":"application/json",accept:"application/json",Authorization:"token "+n},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){200===e.status&&(window.location.href="/orders")})).catch((function(e){console.log(e)}))},disabled:0===R()},"Place Order")))},C=n(10),P=n(12),R=n(17);function T(){var e=Object(h.a)(["\n  button {\n    width: 150px;\n    background: #6d6d71;\n    color: white;\n    &:hover {\n      color: white !important;\n    }\n  }\n"]);return T=function(){return e},e}function q(){var e=Object(h.a)(["\n  width: 40%;\n  margin: 40px auto;\n  background: #f3f3f3;\n  padding: 3%;\n  border-radius: 6px;\n  .input-label {\n    display: flex !important;\n  }\n  input[type=checkbox]{\n    margin-top: 6px;\n    margin-right: 4px;\n  }\n"]);return q=function(){return e},e}var U=v.a.div(q()),J=v.a.div(T()),Z=function(){var e=Object(t.useState)({}),a=Object(l.a)(e,2),n=a[0],r=a[1],o=Object(i.a)(["access_token"]),s=Object(l.a)(o,2),m=s[0],u=s[1],d=m.access_token,p=Object(t.useState)({name:"",email:"",password:""}),h=Object(l.a)(p,2),v=h[0],E=h[1],g=v.name,x=v.email,w=v.password;Object(t.useEffect)((function(){var e={name:"",email:""};g?g.length>=2?g.length<=40?b.test(g)||(e.name="Name should only contain alphabets and numbers"):e.name="Name should not exceed ".concat(40," characters"):e.name="Name should be at least ".concat(2," characters long"):e.name="",x?f.test(x)?x.length<=254||(e.email="Email should not exceed ".concat(254," characters")):e.email="*Please enter valid email":e.email="",console.log(v),console.log(e),r(e)}),[g,x,v]);var j=function(e){E(Object(P.a)(Object(P.a)({},v),{},Object(C.a)({},e.target.name,e.target.value)))};return d&&(window.location.href="/orders"),c.a.createElement(U,null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(v),fetch("http://localhost:3000/api/v1/auth/register",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify({name:g,email:x,password:w})}).then((function(e){return e.json()})).then((function(e){!function(e){var a=e.access_token,n=e.user;a?(u("user",n),u("access_token",a),console.log(a)):console.log(e.message)}(e)})).catch((function(e){console.log(e)}))},method:"post"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"input-label",for:"email"},"Name:"),c.a.createElement("input",{type:"text",name:"name",className:"form-control",id:"name",required:!0,value:g,onChange:j,error:Object(R.get)("name",n)})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"input-label",for:"email"},"Email address:"),c.a.createElement("input",{type:"email",name:"email",className:"form-control",id:"email",required:!0,value:x,onChange:j,error:Object(R.get)("email",n)})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"input-label",for:"pwd"},"Password:"),c.a.createElement("input",{type:"password",name:"password",className:"form-control",id:"pwd",required:!0,value:w,onChange:j})),c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",{className:"input-label"},c.a.createElement("input",{type:"checkbox"})," Remember me")),c.a.createElement("br",null),c.a.createElement(J,{className:"form-group"},c.a.createElement("button",{type:"submit",className:"btn btn-default"},"Submit"))))},I=function(){var e=Object(t.useState)({}),a=Object(l.a)(e,2),n=a[0],r=a[1],o=Object(i.a)(["access_token"]),s=Object(l.a)(o,2),m=s[0],u=s[1],d=m.access_token,p=Object(t.useState)({email:"",password:""}),b=Object(l.a)(p,2),h=b[0],v=b[1],E=h.email,g=h.password;Object(t.useEffect)((function(){var e={email:""};E?f.test(E)?E.length<=254||(e.email="Email should not exceed ".concat(254," characters")):e.email="*Please enter valid email":e.email="",console.log(h),console.log(e),r(e)}),[E,h]);var x=function(e){v(Object(P.a)(Object(P.a)({},h),{},Object(C.a)({},e.target.name,e.target.value)))};return d&&(window.location.href="/orders"),c.a.createElement(U,null,c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(h),fetch("http://localhost:3000/api/v1/auth/login",{method:"POST",headers:{"content-type":"application/json",accept:"application/json"},body:JSON.stringify({email:E,password:g})}).then((function(e){return e.json()})).then((function(e){!function(e){var a=e.access_token,n=e.user;a?(u("user",n),u("access_token",a),console.log(a)):console.log(e.message)}(e)})).catch((function(e){console.log(e)}))},method:"post"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"input-label",for:"email"},"Email address:"),c.a.createElement("input",{type:"email",name:"email",className:"form-control",id:"email",required:!0,value:E,onChange:x,error:Object(R.get)("email",n)})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"input-label",for:"pwd"},"Password:"),c.a.createElement("input",{type:"password",name:"password",className:"form-control",id:"pwd",required:!0,value:g,onChange:x})),c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",{className:"input-label"},c.a.createElement("input",{type:"checkbox"})," Remember me")),c.a.createElement("br",null),c.a.createElement(J,{className:"form-group"},c.a.createElement("button",{type:"submit",className:"btn btn-default"},"Submit"))))},W=function(e){var a=e.component,n=e.layout,t=Object(m.a)(e,["component","layout"]);return c.a.createElement(u.a,Object.assign({},t,{render:function(e){return c.a.createElement(n,null,c.a.createElement(a,e))}}))},Y=function(e){return c.a.createElement(c.a.Fragment,null,e.children)},$=function(e){e.channel;return c.a.createElement(u.c,null,c.a.createElement(u.a,{exact:!0,path:"/orders",component:D}),c.a.createElement(u.a,{exact:!0,path:"/new-order",component:z}),c.a.createElement(W,{exact:!0,path:"/",layout:Y,component:Z}),c.a.createElement(W,{exact:!0,path:"/login",layout:Y,component:I}))},B=function(){var e=Object(t.useState)(!0),a=Object(l.a)(e,2);a[0],a[1];return c.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-light bg-light"},c.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarNavDropdown"},c.a.createElement("ul",{class:"navbar-nav"},c.a.createElement("li",{class:"nav-item"},c.a.createElement("a",{class:"nav-link",href:"/login"},"Login")),c.a.createElement("li",{class:"nav-item"},c.a.createElement("a",{class:"nav-link",href:"/"},"Signup")))))};function F(){var e=Object(h.a)(["\n  width: auto;\n  padding: 0px 7px;\n  button {\n    border: none !important;\n    background: none !important;\n    box-shadow: none;\n    outline: 0px;\n  }\n"]);return F=function(){return e},e}var H=v.a.div(F()),M=function(){var e=Object(i.a)(["access_token"]),a=Object(l.a)(e,2),n=a[0],t=a[1],r=n.user;return c.a.createElement("nav",{class:"navbar navbar-expand-lg navbar-light bg-light",role:"navigation"},c.a.createElement("div",{class:"collapse navbar-collapse",id:"navbarNavDropdown"},c.a.createElement("ul",{class:"nav navbar-nav navbar-left mr-auto"},c.a.createElement("li",{class:"nav-item"},c.a.createElement("a",{class:"nav-link",href:"/orders"},"Orders")),c.a.createElement("li",{class:"nav-item"},c.a.createElement("a",{class:"nav-link",href:"/new-order"},"New Order"))),c.a.createElement(H,null,c.a.createElement("button",{type:"button"},r.name)," |",c.a.createElement("button",{type:"button",onClick:function(){t("access_token",""),t("user",""),window.location.href="/login"}},"Logout"))))},Q=function(){var e=Object(i.a)(["access_token"]),a=Object(l.a)(e,2),n=a[0],r=(a[1],n.access_token);return Object(t.useEffect)((function(){}),[]),c.a.createElement("div",{className:"parent-root"},c.a.createElement(s.a,null,r?c.a.createElement(M,null):c.a.createElement(B,null),c.a.createElement($,null)))};var G=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(Q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.7ac8c350.chunk.js.map